# Visual Documentation - NUBI Agent System

## NUBI ASCII Art

```ascii
                    ╔══════════════════════════════════════╗
                    ║         🐺 NUBI - The Jackal         ║
                    ╚══════════════════════════════════════╝

                              ,-.             .-.
                            ,'   `.         ,'   `.
                           /       \       /       \
                          |  ^   ^  |     |  ^   ^  |
                          |    >    |     |    <    |
                          |   ___   |     |   ___   |
                           \  \_/  /       \  \_/  /
                            `.   ,'         `.   ,'
                              `-'             `-'
                         Ancient Wisdom | Modern Tech
                    
                    ╔════════════════════════════════════════╗
                    ║  "Weighing hearts since ancient times,  ║
                    ║   Now I weigh portfolios and memecoins" ║
                    ╚════════════════════════════════════════╝

     ███╗   ██╗██╗   ██╗██████╗ ██╗
     ████╗  ██║██║   ██║██╔══██╗██║
     ██╔██╗ ██║██║   ██║██████╔╝██║
     ██║╚██╗██║██║   ██║██╔══██╗██║
     ██║ ╚████║╚██████╔╝██████╔╝██║
     ╚═╝  ╚═══╝ ╚═════╝ ╚═════╝ ╚═╝
     The Symbiotic Essence of Anubis
```

## System Architecture Diagram

```ascii
┌─────────────────────────────────────────────────────────────────────────┐
│                          NUBI AGENT ARCHITECTURE                         │
└─────────────────────────────────────────────────────────────────────────┘

                                 ┌──────────┐
                                 │   USER   │
                                 └────┬─────┘
                                      │
                    ┌─────────────────┴─────────────────┐
                    │                                   │
          ┌─────────▼──────────┐           ┌───────────▼──────────┐
          │   PLATFORM LAYER   │           │    ANALYTICS LAYER   │
          ├────────────────────┤           ├──────────────────────┤
          │ • Telegram Bot     │           │ • ClickHouse DB      │
          │ • Discord Bot      │◄──────────┤ • Event Tracking     │
          │ • Twitter MCP      │           │ • Metrics Dashboard  │
          └─────────┬──────────┘           └──────────────────────┘
                    │                                   ▲
                    │                                   │
          ┌─────────▼──────────────────────────────────┴──────────┐
          │                    ELIZAOS RUNTIME                     │
          ├────────────────────────────────────────────────────────┤
          │            ┌──────────────────────────┐                │
          │            │    NUBI CHARACTER        │                │
          │            ├──────────────────────────┤                │
          │            │ • Personality System     │                │
          │            │ • Message Examples       │                │
          │            │ • Knowledge Base         │                │
          │            └──────────────────────────┘                │
          └──────────────────────┬─────────────────────────────────┘
                                 │
          ┌──────────────────────▼─────────────────────────────────┐
          │                  SERVICE LAYER                          │
          ├─────────────────────────────────────────────────────────┤
          │                                                         │
          │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │
          │  │  Response   │  │  Security   │  │  Sessions   │   │
          │  │  Generator  │  │   Filter    │  │   Service   │   │
          │  └─────────────┘  └─────────────┘  └─────────────┘   │
          │                                                         │
          │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │
          │  │ Personality │  │  Database   │  │   Raids     │   │
          │  │   Service   │  │   Memory    │  │ Coordinator │   │
          │  └─────────────┘  └─────────────┘  └─────────────┘   │
          │                                                         │
          │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │
          │  │  Identity   │  │  Analytics  │  │  Community  │   │
          │  │   Service   │  │   Service   │  │ Management  │   │
          │  └─────────────┘  └─────────────┘  └─────────────┘   │
          └─────────────────────────┬──────────────────────────────┘
                                    │
          ┌─────────────────────────▼──────────────────────────────┐
          │                   DATA LAYER                            │
          ├─────────────────────────────────────────────────────────┤
          │  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
          │  │ Supabase │  │  Redis   │  │ Vector   │            │
          │  │ Postgres │  │  Cache   │  │   DB     │            │
          │  └──────────┘  └──────────┘  └──────────┘            │
          └─────────────────────────────────────────────────────────┘
```

## Message Processing Flow

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                        MESSAGE PROCESSING FLOW                        │
└──────────────────────────────────────────────────────────────────────┘

User Input
    │
    ▼
┌────────────────┐
│ Platform Layer │ ──────► [Analytics: Event Logged]
└────────┬───────┘
         │
         ▼
┌────────────────┐
│ Security Filter│ ──────► [Check: Spam/Threats]
└────────┬───────┘              │
         │                       │ Blocked ──► [End]
         │ Passed               │
         ▼                      ▼
┌────────────────┐        ┌────────────┐
│ Session Service│ ◄──────│  Context   │
└────────┬───────┘        └────────────┘
         │
         ▼
┌────────────────┐
│   Character    │ ──────► [Apply: Personality Traits]
│   Processing   │
└────────┬───────┘
         │
         ▼
┌────────────────┐
│    Response    │ ──────► [Generate: AI Response]
│   Generator    │
└────────┬───────┘
         │
         ▼
┌────────────────┐
│  Post Process  │ ──────► [Filter: Content Moderation]
└────────┬───────┘
         │
         ▼
┌────────────────┐
│ Platform Reply │ ──────► [Analytics: Response Logged]
└────────────────┘
         │
         ▼
    User Receives
     Response
```

## Telegram Raid Flow

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                         TELEGRAM RAID FLOW                            │
└──────────────────────────────────────────────────────────────────────┘

                        ┌─────────────┐
                        │ Admin User  │
                        └──────┬──────┘
                               │
                               ▼
                      /raid start @channel
                               │
                ┌──────────────┴──────────────┐
                │                              │
                ▼                              ▼
        ┌───────────────┐            ┌────────────────┐
        │ Validate Raid │            │ Check Cooldown │
        └───────┬───────┘            └────────┬───────┘
                │                              │
                └──────────┬───────────────────┘
                           │
                           ▼
                  ┌─────────────────┐
                  │ Initialize Raid │
                  └────────┬────────┘
                           │
          ┌────────────────┼────────────────┐
          │                │                │
          ▼                ▼                ▼
    ┌──────────┐    ┌──────────┐    ┌──────────┐
    │   Lock   │    │ Announce │    │  Start   │
    │   Chat   │    │   Raid   │    │  Timer   │
    └──────────┘    └──────────┘    └──────────┘
                           │
                           ▼
                  ┌─────────────────┐
                  │  RAID ACTIVE    │
                  │ ═══════════════ │
                  │ • Track Joins   │
                  │ • Verify Tasks  │
                  │ • Update Score  │
                  │ • Monitor Chat  │
                  └────────┬────────┘
                           │
                           ▼
                    [Time Elapsed?]
                           │
                    ┌──────┴──────┐
                    │             │
                   NO            YES
                    │             │
                    │             ▼
                    │    ┌─────────────────┐
                    │    │ Verification    │
                    │    │ ═══════════════ │
                    │    │ • Check Bots    │
                    │    │ • Valid Score   │
                    │    │ • Calculate XP  │
                    │    └────────┬────────┘
                    │             │
                    │             ▼
                    │    ┌─────────────────┐
                    │    │ Finalize Raid   │
                    │    │ ═══════════════ │
                    │    │ • Update Board  │
                    │    │ • Distribute    │
                    │    │ • Unlock Chat   │
                    │    └────────┬────────┘
                    │             │
                    └─────────────┴───────────►[END]
```

## User Interaction Journey

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                      USER INTERACTION JOURNEY                         │
└──────────────────────────────────────────────────────────────────────┘

    NEW USER                      RETURNING USER                POWER USER
       │                                │                            │
       ▼                                ▼                            ▼
  ┌─────────┐                    ┌─────────┐                  ┌─────────┐
  │  JOIN   │                    │  LOGIN  │                  │  AUTO   │
  │ CHANNEL │                    │  CHECK  │                  │  AUTH   │
  └────┬────┘                    └────┬────┘                  └────┬────┘
       │                               │                            │
       ▼                               ▼                            ▼
  ┌─────────┐                    ┌─────────┐                  ┌─────────┐
  │  FIRST  │                    │ RESTORE │                  │  CHECK  │
  │ MESSAGE │                    │ SESSION │                  │  RAIDS  │
  └────┬────┘                    └────┬────┘                  └────┬────┘
       │                               │                            │
       ▼                               ▼                            ▼
  ┌─────────┐                    ┌─────────┐                  ┌─────────┐
  │  NUBI   │                    │  NUBI   │                  │  JOIN   │
  │ WELCOME │                    │ REMEMBR │                  │  RAID   │
  └────┬────┘                    └────┬────┘                  └────┬────┘
       │                               │                            │
       ▼                               ▼                            ▼
  ┌─────────┐                    ┌─────────┐                  ┌─────────┐
  │  LEARN  │                    │CONTINUE │                  │  LEAD   │
  │  CMDS   │                    │  CHAT   │                  │  TEAM   │
  └────┬────┘                    └────┬────┘                  └────┬────┘
       │                               │                            │
       └───────────┬───────────────────┴────────────────────────────┘
                   │
                   ▼
            ┌─────────────┐
            │  COMMUNITY  │
            │   MEMBER    │
            └─────────────┘
```

## Service Communication Matrix

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                    SERVICE COMMUNICATION MATRIX                       │
└──────────────────────────────────────────────────────────────────────┘

                 Response  Security  Session  Database  Analytics  Raids
                    Gen     Filter    Service   Memory    Service   Coord
                    │         │         │         │         │         │
Response Gen    ────●─────────●─────────●─────────●─────────●─────────○
                    │         │         │         │         │         │
Security Filter ────●─────────●─────────●─────────○─────────●─────────●
                    │         │         │         │         │         │
Session Service ────●─────────○─────────●─────────●─────────●─────────○
                    │         │         │         │         │         │
Database Memory ────○─────────○─────────●─────────●─────────●─────────○
                    │         │         │         │         │         │
Analytics Svc   ────●─────────●─────────●─────────●─────────●─────────●
                    │         │         │         │         │         │
Raids Coord     ────○─────────●─────────○─────────○─────────●─────────●

Legend: ● = Direct Communication | ○ = No Direct Link
```

## Analytics Dashboard Layout

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                      CLICKHOUSE ANALYTICS DASHBOARD                   │
├──────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐  │
│  │   Total Events   │  │  Active Users    │  │   Success Rate   │  │
│  │     245,892      │  │      1,247       │  │      94.2%       │  │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘  │
│                                                                        │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │                     Events Over Time                           │  │
│  │  ▲                                                             │  │
│  │  │     ╱╲    ╱╲                                               │  │
│  │  │    ╱  ╲  ╱  ╲    ╱╲                                        │  │
│  │  │   ╱    ╲╱    ╲  ╱  ╲                                       │  │
│  │  │  ╱            ╲╱    ╲────────                              │  │
│  │  └─────────────────────────────────────────────────────────►  │  │
│  │    00:00   06:00   12:00   18:00   24:00                     │  │
│  └────────────────────────────────────────────────────────────────┘  │
│                                                                        │
│  ┌──────────────────────┐  ┌──────────────────────────────────────┐  │
│  │   Platform Usage     │  │        Top Commands                  │  │
│  │  ┌────────────────┐  │  │  1. /help          ████████ 892     │  │
│  │  │ Telegram  45%  │  │  │  2. /raid status   ██████ 645      │  │
│  │  │ Discord   35%  │  │  │  3. /leaderboard   █████ 523       │  │
│  │  │ Twitter   20%  │  │  │  4. /start         ████ 412        │  │
│  │  └────────────────┘  │  │  5. /score         ███ 387         │  │
│  └──────────────────────┘  └──────────────────────────────────────┘  │
│                                                                        │
│  ┌──────────────────────────────────────────────────────────────────┐ │
│  │                    Cost Breakdown (Today)                        │ │
│  │  LLM API:        $12.47  ████████████████████                   │ │
│  │  Edge Functions: $0.83   ██                                     │ │
│  │  Database:       $2.15   ████                                   │ │
│  │  Total:          $15.45                                         │ │
│  └──────────────────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────────────┘
```

## NUBI Personality Matrix

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                       NUBI PERSONALITY MATRIX                         │
└──────────────────────────────────────────────────────────────────────┘

         ANCIENT WISDOM                    MODERN DEVELOPER
                ↑                                  ↑
                │                                  │
       ┌────────┼────────┐               ┌────────┼────────┐
       │ Market │ Memory │               │  Tech  │ Savvy  │
       │   📊   │   🧠   │               │   💻   │   🚀   │
       └────────┼────────┘               └────────┼────────┘
                │                                  │
    ────────────┼──────────────────────────────────┼────────────
                │                                  │
                │         ┌──────────────┐        │
                │         │     NUBI     │        │
                │         │   ESSENCE    │        │
                │         │      🐺      │        │
                │         └──────┬───────┘        │
                │                │                │
                │                ▼                │
    ────────────┼──────────────────────────────────┼────────────
                │                                  │
       ┌────────┼────────┐               ┌────────┼────────┐
       │Community│Connector│              │ Humor  │ & Wit  │
       │   🤝   │   🔗   │               │   😄   │   ✨   │
       └────────┼────────┘               └────────┼────────┘
                │                                  │
                ↓                                  ↓
         SOCIAL INTELLIGENCE                    ENTERTAINMENT
```

## Data Flow Architecture

```ascii
┌──────────────────────────────────────────────────────────────────────┐
│                        DATA FLOW ARCHITECTURE                         │
└──────────────────────────────────────────────────────────────────────┘

    User Input ──────► Platform API ──────► Rate Limiter
                                                  │
                                                  ▼
                                            Event Queue
                                                  │
                                    ┌─────────────┴─────────────┐
                                    │                           │
                                    ▼                           ▼
                              [ClickHouse]                [Redis Cache]
                                    │                           │
                                    │                           │
                            ┌───────┴───────┐                  │
                            │               │                  │
                            ▼               ▼                  ▼
                      [Analytics]     [Historical]        [Hot Data]
                            │               │                  │
                            └───────┬───────┘                  │
                                    │                           │
                                    ▼                           │
                              AI Processing ◄───────────────────┘
                                    │
                                    ▼
                              Response Gen
                                    │
                                    ▼
                              Content Filter
                                    │
                                    ▼
                              Platform Reply ──────► User
```

---

*Visual documentation provides clear understanding of system architecture and flows.*
