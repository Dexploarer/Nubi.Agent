---
title: REST API Reference
description: Complete reference for NUBI's REST API endpoints with interactive examples and live testing capabilities.
---

import {
  Card,
  CardGrid,
  Aside,
  Code,
  Tabs,
  TabItem,
} from "@astrojs/starlight/components";
import ApiExplorer from "../../../components/ApiExplorer.astro";
import SocketDemo from "../../../components/SocketDemo.astro";

# REST API Reference

NUBI provides a comprehensive REST API for interacting with the agent system, managing raids, and accessing analytics. All endpoints use **JSON** for request/response data and require proper authentication.

## üîê Authentication

NUBI uses **JWT Bearer tokens** for authentication. Include the token in the `Authorization` header:

```bash
Authorization: Bearer your-jwt-token-here
```

### Getting Started

<ApiExplorer
  title="Health Check"
  endpoint="https://api.anubis.chat/health"
  method="GET"
  description="Verify API availability and system status"
/>

<ApiExplorer
  title="Authentication"
  endpoint="https://api.anubis.chat/auth/login"
  method="POST"
  description="Authenticate and receive JWT token"
/>

## üéØ Core Agent Endpoints

### Message Processing

<CardGrid>
  <Card title="üí¨ Send Message" icon="approve-check">
    **Process messages** through NUBI's two-layer pipeline - Security filtering
    and validation - Message classification and routing - AI persona response
    generation - Real-time WebSocket broadcasting
  </Card>

  <Card title="üß† Get Context" icon="puzzle">
    **Retrieve conversation context** for enhanced responses - Recent
    conversation history - User preference analysis - Cross-platform identity
    data - Semantic memory retrieval
  </Card>
</CardGrid>

<ApiExplorer
  title="Process Message"
  endpoint="https://api.anubis.chat/api/messages"
  method="POST"
  description="Send message through NUBI's processing pipeline"
/>

<ApiExplorer
  title="Get Conversation Context"
  endpoint="https://api.anubis.chat/api/context/user/{userId}/room/{roomId}"
  method="GET"
  description="Retrieve conversation context and history"
/>

### User Management

<Tabs>
  <TabItem label="User Registration">
```json
{
  "endpoint": "POST /api/users/register",
  "description": "Create new user account with cross-platform identity",
  "request": {
    "username": "alice_crypto",
    "email": "alice@example.com", 
    "platforms": {
      "telegram": "@alice_tg",
      "twitter": "@alice_twitter",
      "discord": "alice#1234"
    },
    "preferences": {
      "notifications": true,
      "raid_alerts": true,
      "preferred_persona": "crypto-analyst"
    }
  },
  "response": {
    "userId": "uuid-here",
    "username": "alice_crypto",
    "jwt_token": "eyJ...",
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```
  </TabItem>
  
  <TabItem label="User Profile">
```json
{
  "endpoint": "GET /api/users/{userId}",
  "description": "Get user profile and statistics",
  "response": {
    "user": {
      "id": "uuid-here",
      "username": "alice_crypto",
      "platforms": {
        "telegram": "@alice_tg",
        "twitter": "@alice_twitter", 
        "discord": "alice#1234"
      },
      "stats": {
        "raids_completed": 47,
        "total_points": 12500,
        "current_rank": 23,
        "verification_rate": 0.94
      },
      "achievements": [
        {
          "id": "raid_rookie",
          "name": "Raid Rookie",
          "earned_at": "2024-01-15T00:00:00Z"
        }
      ],
      "preferences": {
        "notifications": true,
        "raid_alerts": true,
        "preferred_persona": "crypto-analyst"
      }
    }
  }
}
```
  </TabItem>
  
  <TabItem label="Cross-Platform Identity">
```json
{
  "endpoint": "POST /api/users/{userId}/platforms",
  "description": "Link additional platform accounts",
  "request": {
    "platform": "discord",
    "platform_id": "alice#1234",
    "verification_token": "discord-oauth-token"
  },
  "response": {
    "linked": true,
    "platform": "discord",
    "verification_status": "verified",
    "linked_at": "2024-01-20T00:00:00Z"
  }
}
```
  </TabItem>
</Tabs>

<ApiExplorer
  title="Register User"
  endpoint="https://api.anubis.chat/api/users/register"
  method="POST"
  description="Create new user account with platform linking"
/>

<ApiExplorer
  title="Get User Profile"
  endpoint="https://api.anubis.chat/api/users/12345"
  method="GET"
  description="Retrieve user profile and statistics"
/>

## ‚öîÔ∏è Telegram Raids API

### Raid Management

<CardGrid>
  <Card title="üöÄ Create Raid" icon="rocket">
    **Launch new raids** with comprehensive configuration - Target URL and
    platform specification - Participation requirements and limits - Reward
    structure and point allocation - Success criteria and metrics
  </Card>

<Card title="üë• Join Raid" icon="user">
  **Participant enrollment** with eligibility checking - User eligibility
  verification - Requirement validation - Real-time capacity checking -
  Automatic leaderboard updates
</Card>

<Card title="‚úÖ Submit Completion" icon="approve-check">
  **Action verification** with multi-layer validation - Twitter API engagement
  verification - AI-powered quality assessment - Anti-gaming protection - Point
  calculation and award
</Card>

  <Card title="üìä Raid Analytics" icon="chart">
    **Performance metrics** and success tracking - Real-time participation stats
    - Engagement quality analysis - Success rate calculations - ROI and impact
    measurement
  </Card>
</CardGrid>

<ApiExplorer
  title="Create Raid"
  endpoint="https://api.anubis.chat/api/raids"
  method="POST"
  description="Create a new raid campaign"
/>

<ApiExplorer
  title="Join Raid"
  endpoint="https://api.anubis.chat/api/raids/12345/join"
  method="POST"
  description="Join an active raid campaign"
/>

<ApiExplorer
  title="Submit Completion"
  endpoint="https://api.anubis.chat/api/raids/12345/complete"
  method="POST"
  description="Submit proof of raid action completion"
/>

### Leaderboards & Rankings

<Tabs>
  <TabItem label="Global Leaderboard">
```json
{
  "endpoint": "GET /api/leaderboard/global",
  "description": "Get global user rankings",
  "query_parameters": {
    "limit": "number (default: 50, max: 100)",
    "offset": "number (default: 0)",
    "timeframe": "string (day|week|month|all, default: all)",
    "metric": "string (points|raids|quality|consistency, default: points)"
  },
  "response": {
    "leaderboard": [
      {
        "rank": 1,
        "user": {
          "id": "uuid-here",
          "username": "crypto_champion",
          "avatar": "https://example.com/avatar.jpg"
        },
        "stats": {
          "total_points": 25750,
          "raids_completed": 89,
          "verification_rate": 0.97,
          "avg_quality": 0.89
        },
        "achievements": ["legendary_raider", "community_guardian"]
      }
    ],
    "pagination": {
      "total": 1247,
      "page": 1,
      "per_page": 50,
      "has_next": true
    },
    "user_rank": {
      "rank": 23,
      "points": 12500
    }
  }
}
```
  </TabItem>
  
  <TabItem label="Raid Rankings">
```json
{
  "endpoint": "GET /api/raids/{raidId}/leaderboard",
  "description": "Get rankings for specific raid",
  "response": {
    "raid": {
      "id": "raid-uuid",
      "title": "Twitter Engagement Boost",
      "status": "active",
      "participants": 127,
      "completion_rate": 0.78
    },
    "leaderboard": [
      {
        "rank": 1,
        "user": {
          "username": "speed_demon",
          "telegram": "@speedy_trader"
        },
        "completion_time": "2024-01-01T12:05:30Z",
        "quality_score": 0.95,
        "points_earned": 250,
        "actions": [
          {
            "type": "like",
            "verified": true,
            "timestamp": "2024-01-01T12:03:15Z"
          },
          {
            "type": "retweet",
            "verified": true,
            "timestamp": "2024-01-01T12:03:45Z"
          },
          {
            "type": "comment",
            "verified": true,
            "quality": 0.88,
            "content": "Great project! Excited for the future.",
            "timestamp": "2024-01-01T12:05:30Z"
          }
        ]
      }
    ]
  }
}
```
  </TabItem>
  
  <TabItem label="User Statistics">
```json
{
  "endpoint": "GET /api/users/{userId}/stats",
  "description": "Get detailed user performance statistics",
  "response": {
    "overview": {
      "total_points": 12500,
      "current_rank": 23,
      "raids_completed": 47,
      "verification_rate": 0.94,
      "avg_quality_score": 0.82
    },
    "trends": {
      "points_last_7d": 850,
      "raids_last_7d": 6,
      "rank_change": -2,
      "quality_trend": "improving"
    },
    "breakdown": {
      "engagement_raids": 35,
      "growth_raids": 8,
      "defense_raids": 4,
      "points_by_type": {
        "base_completion": 8200,
        "quality_bonus": 2100,
        "speed_bonus": 1450,
        "achievement_bonus": 750
      }
    },
    "achievements": {
      "recent": [
        {
          "id": "speed_demon",
          "name": "Speed Demon",
          "earned_at": "2024-01-18T00:00:00Z",
          "rarity": "rare"
        }
      ],
      "progress": [
        {
          "id": "engagement_master",
          "name": "Engagement Master",
          "progress": 0.74,
          "requirements": {
            "raids_completed": {"current": 47, "required": 50},
            "verification_rate": {"current": 0.94, "required": 1.0}
          }
        }
      ]
    }
  }
}
```
  </TabItem>
</Tabs>

<ApiExplorer
  title="Global Leaderboard"
  endpoint="https://api.anubis.chat/api/leaderboard/global?limit=20"
  method="GET"
  description="Get top performers across all raids"
/>

<ApiExplorer
  title="User Statistics"
  endpoint="https://api.anubis.chat/api/users/12345/stats"
  method="GET"
  description="Get detailed user performance metrics"
/>

## üîç Analytics & Insights

### System Analytics

<CardGrid>
  <Card title="üìà Performance Metrics" icon="chart">
    **System-wide performance** tracking and optimization - Processing pipeline
    latency - Classification accuracy rates - Database query performance - API
    response time distribution
  </Card>

<Card title="üë• Community Health" icon="user">
  **Community engagement** and growth analysis - User activity patterns -
  Retention and churn metrics - Platform-specific engagement - Community
  sentiment analysis
</Card>

<Card title="‚öîÔ∏è Raid Effectiveness" icon="rocket">
  **Campaign performance** and ROI measurement - Engagement rate improvements -
  Viral coefficient tracking - Cost-effectiveness analysis - Success pattern
  identification
</Card>

  <Card title="üõ°Ô∏è Security Insights" icon="warning">
    **Threat detection** and prevention analytics - Attack pattern recognition -
    Gaming attempt analysis - Content quality trends - Moderation effectiveness
  </Card>
</CardGrid>

<Tabs>
  <TabItem label="System Metrics">
```json
{
  "endpoint": "GET /api/analytics/system",
  "description": "Get system performance metrics",
  "query_parameters": {
    "timeframe": "string (hour|day|week|month, default: day)",
    "metrics": "array (['latency', 'throughput', 'errors', 'classification_accuracy'])"
  },
  "response": {
    "timeframe": "day",
    "timestamp": "2024-01-20T00:00:00Z",
    "performance": {
      "api_latency": {
        "avg_ms": 45,
        "p50_ms": 32,
        "p95_ms": 87,
        "p99_ms": 156
      },
      "processing_pipeline": {
        "layer1_avg_ms": 12,
        "layer2_avg_ms": 28,
        "total_avg_ms": 40
      },
      "throughput": {
        "messages_per_second": 127,
        "peak_messages_per_second": 340,
        "total_messages": 10987
      },
      "classification_accuracy": {
        "overall": 0.973,
        "by_persona": {
          "community_manager": 0.945,
          "raid_coordinator": 0.987,
          "crypto_analyst": 0.961,
          "support_agent": 0.983
        }
      }
    },
    "errors": {
      "total_count": 23,
      "rate": 0.002,
      "by_type": {
        "rate_limit": 12,
        "authentication": 7,
        "processing": 3,
        "database": 1
      }
    }
  }
}
```
  </TabItem>
  
  <TabItem label="Community Analytics">
```json
{
  "endpoint": "GET /api/analytics/community",
  "description": "Get community engagement and growth metrics",
  "response": {
    "overview": {
      "total_users": 12847,
      "active_users_24h": 3241,
      "active_users_7d": 8932,
      "new_users_7d": 524,
      "retention_rate_7d": 0.68
    },
    "engagement": {
      "avg_messages_per_user": 23.4,
      "avg_session_duration_min": 18.7,
      "most_active_hours": [20, 21, 22],
      "platform_breakdown": {
        "telegram": 0.45,
        "discord": 0.32,
        "web": 0.18,
        "api": 0.05
      }
    },
    "raids": {
      "active_raids": 12,
      "total_participants": 8934,
      "avg_participation_rate": 0.71,
      "completion_rate": 0.83,
      "quality_score": 0.79
    },
    "sentiment": {
      "overall": "positive",
      "score": 0.73,
      "by_topic": {
        "raids": 0.81,
        "community": 0.74,
        "support": 0.69,
        "features": 0.77
      }
    }
  }
}
```
  </TabItem>
  
  <TabItem label="Raid Analytics">
```json
{
  "endpoint": "GET /api/analytics/raids",
  "description": "Get comprehensive raid performance analytics",
  "query_parameters": {
    "raid_id": "string (optional, for specific raid)",
    "timeframe": "string (day|week|month|all, default: week)",
    "include_historical": "boolean (default: false)"
  },
  "response": {
    "summary": {
      "total_raids": 89,
      "active_raids": 3,
      "completed_raids": 86,
      "avg_participants": 67,
      "overall_success_rate": 0.84
    },
    "performance": {
      "engagement_metrics": {
        "avg_likes_per_raid": 2341,
        "avg_retweets_per_raid": 876,
        "avg_comments_per_raid": 234,
        "avg_followers_gained": 145
      },
      "quality_metrics": {
        "avg_comment_quality": 0.79,
        "verification_rate": 0.91,
        "gaming_detection_rate": 0.03
      },
      "timing_metrics": {
        "avg_completion_time_min": 18.4,
        "fastest_completion_min": 2.3,
        "participation_curve": [
          {"time_min": 0, "participants": 0},
          {"time_min": 5, "participants": 23},
          {"time_min": 15, "participants": 45},
          {"time_min": 30, "participants": 67}
        ]
      }
    },
    "roi_analysis": {
      "engagement_cost_efficiency": 0.023,
      "follower_acquisition_cost": 1.47,
      "community_value_score": 8.2,
      "viral_coefficient": 1.34
    },
    "top_performers": [
      {
        "raid_id": "uuid-here",
        "title": "Major Partnership Announcement",
        "participants": 234,
        "completion_rate": 0.97,
        "engagement_score": 9.2,
        "viral_reach": 45789
      }
    ]
  }
}
```
  </TabItem>
</Tabs>

<ApiExplorer
  title="System Analytics"
  endpoint="https://api.anubis.chat/api/analytics/system?timeframe=day"
  method="GET"
  description="Get comprehensive system performance metrics"
/>

<ApiExplorer
  title="Community Analytics"
  endpoint="https://api.anubis.chat/api/analytics/community"
  method="GET"
  description="Analyze community health and engagement patterns"
/>

## üîå Real-time Communication

NUBI provides both REST endpoints and WebSocket connections for real-time communication:

<SocketDemo
  title="Live Socket.IO Integration"
  description="Test NUBI's real-time two-layer processing system"
/>

### WebSocket Events

<CardGrid>
  <Card title="üì® Client Events" icon="approve-check">
    **Events sent from client to server** - `connect` - Establish connection -
    `join-room` - Enter chat room - `send-message` - Send message for processing
    - `request-world-state` - Get current system state
  </Card>

  <Card title="üì° Server Events" icon="rocket">
    **Events sent from server to client** - `message-received` - New processed
    message - `user-joined` - User entered room - `world-state` - Current system
    state - `processing-status` - Pipeline status updates
  </Card>
</CardGrid>

## üõ°Ô∏è Error Handling

NUBI uses standard HTTP status codes and provides detailed error information:

<Tabs>
  <TabItem label="Error Response Format">
```json
{
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Too many requests. Please wait before retrying.",
    "details": {
      "limit": 100,
      "window": "hour",
      "retry_after": 1847
    },
    "timestamp": "2024-01-20T12:34:56Z",
    "request_id": "req_abc123def456"
  }
}
```
  </TabItem>
  
  <TabItem label="Common Error Codes">
```typescript
// Authentication Errors
INVALID_TOKEN = "JWT token is invalid or expired"
MISSING_TOKEN = "Authorization token is required"
INSUFFICIENT_PERMISSIONS = "User lacks required permissions"

// Rate Limiting
RATE_LIMIT_EXCEEDED = "Too many requests in time window"
QUOTA_EXCEEDED = "Monthly quota limit reached"

// Validation Errors  
INVALID_REQUEST_FORMAT = "Request body format is invalid"
MISSING_REQUIRED_FIELDS = "Required fields are missing"
INVALID_FIELD_VALUE = "Field value is invalid"

// Resource Errors
RESOURCE_NOT_FOUND = "Requested resource does not exist"
RESOURCE_ALREADY_EXISTS = "Resource already exists"
RESOURCE_UNAVAILABLE = "Resource temporarily unavailable"

// Processing Errors
PROCESSING_FAILED = "Message processing failed"
CLASSIFICATION_ERROR = "Unable to classify message"
AI_SERVICE_UNAVAILABLE = "AI service is temporarily unavailable"

// Raid-Specific Errors
RAID_NOT_FOUND = "Raid does not exist"
RAID_FULL = "Raid has reached maximum participants"
RAID_EXPIRED = "Raid has ended"
ALREADY_PARTICIPATING = "User already joined this raid"
VERIFICATION_FAILED = "Action verification failed"

````
  </TabItem>
</Tabs>

<Aside type="tip">
**Rate Limits**: All API endpoints are rate limited. Current limits are 1000 requests per hour for authenticated users and 100 requests per hour for unauthenticated requests.
</Aside>

## üìö SDK & Libraries

<CardGrid>
  <Card title="üì± JavaScript/TypeScript" icon="approve-check">
    **Official SDK** with full TypeScript support

    ```bash
    npm install @nubi/sdk
    ```

    - Full API coverage
    - WebSocket integration
    - Real-time event handling
    - Built-in retry logic
  </Card>

  <Card title="üêç Python" icon="puzzle">
    **Python client** for backend integration

    ```bash
    pip install nubi-python
    ```

    - Async/await support
    - Django/Flask integration
    - Comprehensive examples
    - Advanced analytics tools
  </Card>

  <Card title="ü¶Ä Rust" icon="setting">
    **High-performance Rust** client

    ```bash
    cargo add nubi-client
    ```

    - Zero-cost abstractions
    - Tokio async runtime
    - Strong type safety
    - Memory efficient
  </Card>

  <Card title="‚òï Java" icon="warning">
    **Enterprise Java** integration

    ```xml
    <dependency>
      <groupId>chat.anubis</groupId>
      <artifactId>nubi-java</artifactId>
    </dependency>
    ```

    - Spring Boot starter
    - Reactive streams
    - Comprehensive logging
    - Production ready
  </Card>
</CardGrid>

---

<div class="nubi-note">
<strong>üöÄ Ready to integrate?</strong> Start with our <a href="/api/quickstart/">API Quickstart Guide</a> for step-by-step integration instructions, or explore the <a href="/api/websockets/">WebSocket Documentation</a> for real-time features.
</div>

## Next Steps

<CardGrid>
  <Card title="‚ö° Quickstart Guide" icon="rocket">
    Get up and running with NUBI's API in under 10 minutes.
    [Start Building ‚Üí](/api/quickstart/)
  </Card>

  <Card title="üîå WebSocket API" icon="approve-check">
    Learn about real-time communication and event handling.
    [Go Real-time ‚Üí](/api/websockets/)
  </Card>

  <Card title="üõ°Ô∏è Authentication" icon="warning">
    Understand JWT tokens, permissions, and security best practices.
    [Secure ‚Üí](/api/authentication/)
  </Card>

  <Card title="üìä Rate Limits" icon="chart">
    Learn about API limits, quotas, and optimization strategies.
    [Optimize ‚Üí](/api/rate-limits/)
  </Card>
</CardGrid>
````
